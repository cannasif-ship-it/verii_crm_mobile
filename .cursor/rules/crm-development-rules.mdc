---
description: CRM Expo (React Native) Cursor Rules â€” architecture, UI, data fetching, performance
alwaysApply: true
---

# ğŸš€ CRM Expo Cursor Rules (React Native + TypeScript + Expo)

Bu proje **Expo + React Native + TypeScript** ile geliÅŸtirilir.
Cursor aÅŸaÄŸÄ±daki kurallara **her dosyada** otomatik ve eksiksiz uyar.

AMAÃ‡:
- Feature-first mimari + co-location
- UI / business logic / network ayrÄ±mÄ±
- TanStack Query ile tip gÃ¼venli server state
- PerformanslÄ± listeleme (ScrollView yerine FlatList/SectionList)
- Ortak UI standardÄ± (Gluestack UI v3) + merkezi tema

================================================================================

## 1) TEMEL KURALLAR (KIRMIZI Ã‡Ä°ZGÄ°)

- Asla yorum satÄ±rÄ± kullanma
- `any` kesin yasak, gerekirse `unknown` + type-guard
- Component iÃ§inde doÄŸrudan `fetch/axios` Ã§aÄŸrÄ±sÄ± yapma
- API istekleri **TanStack Query** ile yapÄ±lÄ±r
- Her query iÃ§in **Ã¶zel `staleTime`** zorunludur (global defaultâ€™a gÃ¼venme)
- Feature dÄ±ÅŸÄ±ndan feature iÃ§i dosyaya direkt import yasak (sadece `index.ts` Ã¼zerinden)
- â€œGod component/screenâ€ yasak, kÃ¼Ã§Ã¼k ve okunabilir parÃ§alara bÃ¶l

================================================================================

## 2) UI KÃœTÃœPHANESÄ° / COMPONENT STANDARDI

- Temel UI kÃ¼tÃ¼phanesi: **Gluestack UI v3**
- Gluestack componentleri **`@/components/ui`** altÄ±ndan import edilir
- `src/components/ui` sadece presentational bileÅŸenlerdir, business logic iÃ§ermez

KULLANIM PRENSÄ°BÄ°:
- Featureâ€™a Ã¶zel gÃ¶rsel bileÅŸenler ilgili feature altÄ±nda yaÅŸar
- Yeni UI bileÅŸeni eklemek iÃ§in: `npx gluestack-ui add <component-name>`

================================================================================

## 3) MÄ°MARÄ° â€” FEATURE FIRST (ZORUNLU)

KlasÃ¶r yapÄ±sÄ±:

src/
  app/
    (auth)/
    (tabs)/
    _layout.tsx
  features/
    <feature>/
      api/
      hooks/
      screens/
      components/
      types/
      index.ts
  components/
    ui/
  lib/
    axios.ts
    queryClient.ts
    storage.ts
  store/
    ui.ts
  locales/
    tr.json
    en.json
  constants/
    env.ts

KURALLAR:
- BaÅŸka featureâ€™dan direkt import yasak
- DÄ±ÅŸ dÃ¼nya featureâ€™a sadece `features/<feature>/index.ts` ile eriÅŸir
- Bir feature ile ilgili her ÅŸey aynÄ± feature klasÃ¶rÃ¼nde bulunur (co-location)

================================================================================

## 4) SCREEN â€” HOOK AYRIMI (KATI)

SCREEN:
- Sadece UI render eder
- API Ã§aÄŸrÄ±sÄ± yasak
- Navigation yasak
- Ä°ÅŸ kuralÄ± / validasyon yasak
- Liste renderÄ± iÃ§in yalnÄ±zca hazÄ±r item componentlerini kullanÄ±r

HOOK:
- TÃ¼m business logic burada
- Navigation burada
- Form state + validation burada
- Query/mutation yÃ¶netimi burada
- Loading/error/success state burada
- Pagination / infinite scroll burada

AkÄ±ÅŸ:
Screen â†’ Hook â†’ (Query/Mutation) â†’ Service â†’ API

================================================================================

## 5) DATA FETCHING â€” TANSTACK QUERY (ZORUNLU)

- Query ve mutationâ€™lar hook iÃ§inde tanÄ±mlanÄ±r
- Her query iÃ§in `staleTime` aÃ§Ä±kÃ§a yazÄ±lÄ±r
- Query key standardÄ±:
  ['feature', 'entity', params]

Component iÃ§inde:
- Query clientâ€™a eriÅŸme
- Cache invalidation yapma
- Network logic yazma

================================================================================

## 6) API & SERVICE PATTERN

- TÃ¼m servisler `src/features/<feature>/api` altÄ±nda
- Saf axios import yasak, sadece `src/lib/axios.ts` instance kullanÄ±lÄ±r
- Service sadece HTTP Ã§aÄŸrÄ±sÄ± yapar, state/logic iÃ§ermez

ZORUNLU:
- Response tipleri:
  - `ApiResponse<T>`
  - `PagedResponse<T>`
- DTO/typeâ€™lar sadece `src/features/<feature>/types` altÄ±nda

================================================================================

## 7) LÄ°STELEME â€” SCROLLVIEW KURAL SETÄ° (PERFORMANS)

ALTIN KURAL:
- Liste renderÄ± **map ile asla yapÄ±lmaz**
- Liste renderÄ± iÃ§in **FlatList / SectionList zorunlu**

ScrollView KULLANIMI:
- `ScrollView` sadece **kÄ±sa ve statik** iÃ§erik (form, 5-10 eleman gibi) iÃ§in kullanÄ±labilir
- Dinamik, uzun, bÃ¼yÃ¼yen veri (mÃ¼ÅŸteri listesi, sipariÅŸler, stok vb.) iÃ§in **ScrollView yasak**
- `ScrollView + .map` kombinasyonu kesin yasak

FlatList ZORUNLULUKLARI:
- `keyExtractor` zorunlu
- `renderItem` ayrÄ± component olmalÄ± (Ã¶rn: `CustomerRow`)
- Item component `memo` ile sarmalanmalÄ± (gerektiÄŸinde)
- Infinite scroll gerekiyorsa `onEndReached` hook tarafÄ±ndan yÃ¶netilir

Paged liste standardÄ±:
- Hook, `PagedResponse.items` render eder
- Hook, `hasNextPage` / `pageNumber` / `pageSize` kontrolÃ¼nÃ¼ yapar
- Screen sadece `data`, `onEndReached`, `isFetchingNextPage` gibi props alÄ±r

================================================================================

## 8) FORM STANDARDI

- Form state: `react-hook-form`
- Validation: `zod` zorunlu
- `useState` ile form yÃ¶netimi yasak
- Validasyon logicâ€™i component/screen iÃ§ine yazÄ±lmaz, hook + schema ile yapÄ±lÄ±r

================================================================================

## 9) STATE YÃ–NETÄ°MÄ°

- Server state: TanStack Query
- Global UI state: Zustand veya Context API
- Redux kesin yasak

================================================================================

## 10) STYLE / THEME KURALLARI

- Inline style yasak
- Stil tanÄ±mlarÄ± merkezi theme yaklaÅŸÄ±mÄ±yla yapÄ±lÄ±r (Gluestack + merkezi sabitler)
- Renkler proje standardÄ±na uygun olmalÄ± (primary/accent/text/background/border/success/error/warning)
- Gereksiz yeni renk tanÄ±mlama yapma, mevcut palette kullan

================================================================================

## 11) i18n (Ã‡OKLU DÄ°L) ZORUNLU

- `i18next` + `react-i18next` kullanÄ±lÄ±r
- Dil dosyalarÄ± `src/locales/` altÄ±nda (`tr.json`, `en.json`)
- TÃ¼m statik metinler `t()` ile Ã§aÄŸrÄ±lÄ±r
- Hardcoded string yasak
- Dil tercihi storage ile persist edilir

================================================================================

## 12) Ä°SÄ°MLENDÄ°RME

- KlasÃ¶rler: kebab-case (customer-list)
- Component dosyalarÄ±: PascalCase (CustomerRow.tsx)
- Hook dosyalarÄ±: camelCase ve `use` ile baÅŸlar (useCustomerList.ts)
- Utility: camelCase (formatPrice.ts)
- Types/Interfaces: PascalCase (CustomerDto)
- Constants: UPPER_SNAKE_CASE (API_TIMEOUT)

================================================================================

## 13) GENEL YASAKLAR Ã–ZET

- Comment satÄ±rÄ±
- Component/screen iÃ§inde API Ã§aÄŸrÄ±sÄ±
- Feature dÄ±ÅŸÄ±ndan direkt import
- `any`
- Listeyi `.map` ile render
- Uzun/dinamik listeleri ScrollView ile yapmak
- Screen iÃ§inde navigation / business logic
- Inline style

================================================================================

Cursor bu kurallara uymayan kod Ã¼retmemelidir.
Bu kurallar HER ZAMAN ve HER DOSYADA geÃ§erlidir.
